# Copyright 2025 Canonical Ltd.
# See LICENSE file for licensing details.

name: netbox-k8s

type: charm

bases:
  - build-on:
    - name: ubuntu
      channel: "22.04"
    run-on:
    - name: ubuntu
      channel: "22.04"

summary: NetBox is a solution for modeling and documenting network infrastructure.
description: |
  NetBox is the go-to solution for modeling and documenting network
  infrastructure for thousands of organizations worldwide. As a successor
  to legacy IPAM and DCIM applications, NetBox provides a cohesive,
  extensive, and accessible data model for all things networked.

links:
  documentation: https://discourse.charmhub.io/t/netbox-documentation-overview/13564
  issues: https://github.com/canonical/netbox-k8s-operator/issues
  source: https://github.com/canonical/netbox-k8s-operator
  website:
  - https://github.com/canonical/netbox-k8s-operator

extensions:
  - django-framework

charm-libs:
- lib: hydra.oauth
  version: '0'

requires:
  postgresql:
    interface: postgresql_client
    limit: 1
  s3:
    interface: s3
    limit: 1
  redis:
    interface: redis
    limit: 1
  saml:
    interface: saml
    limit: 1
    optional: true
  oidc:
    interface: oauth
    optional: True
    limit: 1

config:
  options:
    oidc-redirect-path:
      type: string
      description: The path that the user will be redirected upon completing login.
      default: /oauth/complete/oidc/
    oidc-scopes:
      type: string
      description: A list of scopes with spaces in between.
      default: "openid profile email"
